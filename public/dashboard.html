<!-- public/dashboard.html -->

<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tableau de bord - KB Medizin Tool</title>
    <link rel="stylesheet" href="/css/tokens.css" />
    <link rel="stylesheet" href="/css/base.css" />
    <link rel="stylesheet" href="/css/layout.css" />
    <link rel="stylesheet" href="/css/forms.css" />
    <link rel="stylesheet" href="/css/components.css" />
    <link rel="stylesheet" href="/css/table.css" />
    <link rel="stylesheet" href="/css/pages.css" />
    <link rel="stylesheet" href="/css/utilities.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="/css/transitions.css" />
<link rel="shortcut icon" href="src/images/swiss_flag.webp" type="image/x-icon">
<link href="https://unpkg.com/slim-select@2.8.2/dist/slimselect.css" rel="stylesheet">
</head>
  <body>
    <div class="app-container">
      <aside class="sidebar">
        <div class="sidebar-header">
          <h2>KB Medizin</h2>
        </div>
        <nav class="sidebar-nav">
  <a href="/dashboard.html" class="active">
    <i class="fas fa-chart-line"></i>
    <span>Tableau de bord</span>
  </a>
  <a href="/clients.html">
    <i class="fas fa-users"></i>
    <span>Clients</span>
  </a>
  <a href="/checklists.html">
    <i class="fas fa-clipboard-check"></i>
    <span>Checklists</span>
  </a>
  <a href="/reports.html">
    <i class="fas fa-file-alt"></i>
    <span>Rapports</span>
  </a>
  <a href="/admin.html" id="admin-link" class="hidden">
    <i class="fas fa-cog"></i>
    <span>Administration</span>
  </a>
</nav>
        <div class="sidebar-footer">
          <div class="user-info" id="user-info"></div>
          <button class="btn btn-secondary btn-sm" id="logout-btn" style="width: 100%;">
            <i class="fas fa-sign-out-alt"></i>
            Déconnexion
          </button>
        </div>
      </aside>

      <main class="main-content">
        <div class="page-header">
          <h1><i class="fas fa-chart-line"></i> Tableau de bord</h1>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
          <div class="stat-card danger">
            <div class="stat-card-header">
              <h3>Maintenances expirées</h3>
              <div class="stat-card-icon">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
            </div>
            <div class="value" id="stat-expired">-</div>
          </div>

          <div class="stat-card warning">
            <div class="stat-card-header">
              <h3>RDV à fixer</h3>
              <div class="stat-card-icon">
                <i class="fas fa-calendar-times"></i>
              </div>
            </div>
            <div class="value" id="stat-appointments">-</div>
          </div>

          <div class="stat-card success">
            <div class="stat-card-header">
              <h3>Clients à jour</h3>
              <div class="stat-card-icon">
                <i class="fas fa-check-circle"></i>
              </div>
            </div>
            <div class="value" id="stat-uptodate">-</div>
          </div>

          <div class="stat-card info">
            <div class="stat-card-header">
              <h3>Équipements installés</h3>
              <div class="stat-card-icon">
                <i class="fas fa-tools"></i>
              </div>
            </div>
            <div class="value" id="stat-equipment">-</div>
          </div>
        </div>

        <!-- Widgets -->
        <div class="widgets-grid">
          <div class="widget" id="widget-appointments">
            <div class="widget-header">
              <h2><i class="fas fa-calendar-alt"></i> Rendez-vous à venir</h2>
            </div>
            <div class="widget-content" id="appointments-list">
              <p style="text-align: center; color: var(--neutral-500)">Chargement...</p>
            </div>
          </div>

          <div class="widget" id="widget-contacts">
            <div class="widget-header">
              <h2><i class="fas fa-phone"></i> Clients à contacter</h2>
            </div>
            <div class="widget-content" id="contacts-list">
              <p style="text-align: center; color: var(--neutral-500)">Chargement...</p>
            </div>
          </div>

          <div class="widget" id="widget-maintenance-month">
            <div class="widget-header">
              <h2><i class="fas fa-wrench"></i> Maintenances du mois</h2>
            </div>
            <div class="widget-content" id="maintenance-month-list">
              <p style="text-align: center; color: var(--neutral-500)">Chargement...</p>
            </div>
          </div>

          <div class="widget" id="widget-warranty">
            <div class="widget-header">
              <h2><i class="fas fa-shield-alt"></i> Garanties expirant</h2>
            </div>
            <div class="widget-content" id="warranty-list">
              <p style="text-align: center; color: var(--neutral-500)">Chargement...</p>
            </div>
          </div>
        </div>

        <!-- Carte -->
        <div class="widget" id="widget-map" style="max-width: none">
          <div class="widget-header">
            <h2><i class="fas fa-map-marked-alt"></i> Carte des clients</h2>
          </div>
          <div class="widget-content" style="padding: 0; max-height: none; position: relative;">
            <div class="map-filters">
              <button class="map-filter-btn active" data-filter="all">
                <i class="fas fa-layer-group"></i> Tous
              </button>
              <button class="map-filter-btn" data-filter="ok">
                <i class="fas fa-check-circle"></i> À jour
              </button>
              <button class="map-filter-btn" data-filter="warning">
                <i class="fas fa-exclamation-triangle"></i> Bientôt
              </button>
              <button class="map-filter-btn" data-filter="expired">
                <i class="fas fa-times-circle"></i> Expiré
              </button>
            </div>
            <div id="map"></div>
          </div>
        </div>

        <!-- Footer -->
        <footer class="app-footer">
          <div class="footer-content">
            <div class="footer-brand">
              <div class="footer-logo">
                <i class="fas fa-stethoscope"></i>
              </div>
              <div class="footer-info">
                <h3>KB Medizin Technik GmbH</h3>
                <p>Solutions médicales professionnelles</p>
              </div>
            </div>
            
            <div class="footer-links">
              <div class="footer-section">
                <h4>Contact</h4>
                <ul>
                  <li><a href="tel:+41617211111"><i class="fas fa-phone"></i> +41 61 721 11 11</a></li>
                  <li><a href="mailto:info@kbmedizin.ch"><i class="fas fa-envelope"></i> info@kbmedizin.ch</a></li>
                  <li><a href="#"><i class="fas fa-map-marker-alt"></i> Biel-Benken, Suisse</a></li>
                </ul>
              </div>
            </div>
          </div>
          
          <div class="footer-bottom">
            <p>&copy; 2025 KB Medizin Technik GmbH. Tous droits réservés.</p>
          </div>
        </footer>
      </main>
    </div>

    <div id="notification-container" class="notification-container"></div>
    <div class="modal" id="stats-detail-modal">
  <div class="modal-content" style="max-width: 800px; max-height: 85vh; display: flex; flex-direction: column;">
    <div class="modal-header">
      <h2 id="stats-modal-title"><i class="fas fa-list"></i> Détails</h2>
      <button class="modal-close" onclick="document.getElementById('stats-detail-modal').classList.remove('active')">&times;</button>
    </div>
    <div class="modal-body" style="padding: 0; overflow: hidden; display: flex; flex-direction: column;">
      <div id="stats-modal-list" style="overflow-y: auto; flex: 1; padding: 1rem;">
        Chargement...
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="document.getElementById('stats-detail-modal').classList.remove('active')">Fermer</button>
    </div>
  </div>
</div>
<script type="module" src="/js/init-selects.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="/js/loader.js"></script>
    <script src="/js/dashboard.js"></script>
<script src="/js/page-transitions.js"></script>
</body>
</html>