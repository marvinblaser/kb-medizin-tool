<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Checklists - KB Medizin Tool</title>
  <link rel="stylesheet" href="/css/tokens.css" />
  <link rel="stylesheet" href="/css/base.css" />
  <link rel="stylesheet" href="/css/layout.css" />
  <link rel="stylesheet" href="/css/forms.css" />
  <link rel="stylesheet" href="/css/components.css" />
  <link rel="stylesheet" href="/css/table.css" />
  <link rel="stylesheet" href="/css/pages.css" />
  <link rel="stylesheet" href="/css/utilities.css" />
  <link rel="stylesheet" href="/css/transitions.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <div class="sidebar-header"><h2>KB Medizin</h2></div>
      <nav class="sidebar-nav">
        <a href="/dashboard.html"><i class="fas fa-chart-line"></i><span>Tableau de bord</span></a>
        <a href="/clients.html"><i class="fas fa-users"></i><span>Clients</span></a>
        <a href="/checklists.html" class="active"><i class="fas fa-clipboard-check"></i><span>Checklists</span></a>
        <a href="/reports.html"><i class="fas fa-file-alt"></i><span>Rapports</span></a>
        <a href="/admin.html" id="admin-link" class="hidden"><i class="fas fa-cog"></i><span>Administration</span></a>
      </nav>
      <div class="sidebar-footer">
        <div class="user-info" id="user-info"></div>
        <button class="btn btn-secondary btn-sm" id="logout-btn" style="width: 100%">
          <i class="fas fa-sign-out-alt"></i> Déconnexion
        </button>
      </div>
    </aside>

    <main class="main-content">
      
      <div class="page-header">
        <h1><i class="fas fa-clipboard-list"></i> Gestion des Checklists</h1>
        <button class="btn btn-primary" id="add-checklist-btn">
            <i class="fas fa-plus"></i> Nouvelle Checklist
        </button>
      </div>

      <div class="checklist-container-fluid" style="padding: 2rem 3rem;">
      
        <div class="toolbar-card">
            
            <div class="toolbar-search">
                <i class="fas fa-search"></i>
                <input type="text" id="checklist-search" placeholder="Rechercher une checklist..." />
            </div>

            <div class="toolbar-divider"></div>

            <div class="toolbar-tabs">
                <button class="nav-tab active" onclick="switchTab('all')">
                    Tous <span class="nav-count" id="count-all">0</span>
                </button>
                <button class="nav-tab" onclick="switchTab('Maintenance')">
                    Maintenance <span class="nav-count" id="count-Maintenance">0</span>
                </button>
                <button class="nav-tab" onclick="switchTab('Installation')">
                    Installation <span class="nav-count" id="count-Installation">0</span>
                </button>
                <button class="nav-tab" onclick="switchTab('Dépannage')">
                    Dépannage <span class="nav-count" id="count-Dépannage">0</span>
                </button>
                <button class="nav-tab" onclick="switchTab('Audit')">
                    Audit <span class="nav-count" id="count-Audit">0</span>
                </button>
                <button class="nav-tab" onclick="switchTab('Autre')">
                    Autre <span class="nav-count" id="count-Autre">0</span>
                </button>
            </div>
        </div>

        <div class="checklists-grid" id="checklists-grid">
            </div>

        <div class="pagination-bar" id="pagination-container" style="display: none;">
            <span class="pagination-info" id="pagination-info">Page 1 sur 1</span>
            <div class="pagination-buttons">
                <button class="btn btn-secondary btn-sm" id="prev-page" disabled><i class="fas fa-chevron-left"></i></button>
                <button class="btn btn-secondary btn-sm" id="next-page" disabled><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>

      </div>
    </main>
  </div>

  <div class="modal" id="checklist-modal">
    <div class="modal-content" style="max-width: 900px">
      <div class="modal-header">
        <h2 id="checklist-modal-title"><i class="fas fa-file-contract" style="color:var(--color-primary)"></i> Éditer la checklist</h2>
        <button class="modal-close" id="close-checklist-modal">&times;</button>
      </div>
      <div class="modal-body">
        <form id="checklist-form">
          <input type="hidden" id="checklist-id" />
          <div class="form-row">
            <div class="form-group" style="flex: 2;"><label>Nom de la checklist *</label><input type="text" id="checklist-name" required placeholder="Ex: Maintenance Annuelle ORL" /></div>
            <div class="form-group" style="flex: 1;"><label>Catégorie</label><select id="checklist-category"><option value="Autre">Autre</option><option value="Maintenance">Maintenance</option><option value="Installation">Installation</option><option value="Dépannage">Dépannage</option><option value="Audit">Audit</option></select></div>
          </div>
          <div class="form-group"><label>Description courte</label><textarea id="checklist-description" rows="2" placeholder="Instructions..."></textarea></div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 1rem;">
              <div class="checklist-section">
                <div class="checklist-section-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; border-bottom:1px solid var(--border-color); padding-bottom:0.5rem;"><h3 style="font-size:1rem; margin:0;"><i class="fas fa-toolbox" style="color:#3b82f6;"></i> Matériel Requis</h3><button type="button" class="btn btn-sm btn-secondary" id="add-equipment-btn"><i class="fas fa-plus"></i></button></div>
                <div id="equipment-list" class="checklist-items-list"></div>
              </div>
              <div class="checklist-section">
                <div class="checklist-section-header" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; border-bottom:1px solid var(--border-color); padding-bottom:0.5rem;"><h3 style="font-size:1rem; margin:0;"><i class="fas fa-tasks" style="color:#8b5cf6;"></i> Tâches à faire</h3><button type="button" class="btn btn-sm btn-secondary" id="add-task-btn"><i class="fas fa-plus"></i></button></div>
                <div id="tasks-list" class="checklist-items-list"></div>
              </div>
          </div>
        </form>
      </div>
      <div class="modal-footer"><button class="btn btn-secondary" id="cancel-checklist-btn">Annuler</button><button class="btn btn-save" id="save-checklist-btn">Enregistrer</button></div>
    </div>
  </div>

  <div class="modal" id="delete-checklist-modal"><div class="modal-content" style="max-width: 400px"><div class="modal-header"><h2 style="color:var(--color-danger);">Supprimer ?</h2><button class="modal-close" id="close-delete-modal">&times;</button></div><div class="modal-body"><p>Voulez-vous vraiment supprimer la checklist <strong id="delete-checklist-name"></strong> ?</p></div><div class="modal-footer"><button class="btn btn-secondary" id="cancel-delete-checklist-btn">Annuler</button><button class="btn btn-danger" id="confirm-delete-checklist-btn">Confirmer</button></div></div></div>
  <div id="notification-container" class="notification-container"></div>
  <script src="/js/checklists.js"></script>
</body>
</html>